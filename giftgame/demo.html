<html xmlns="http://www.w3.org/1999/xhtml">
<meta charset="UTF-8">
<head>
    <style>
        body{
            background-color:#fff;
            margin: 0px;
            height: 100%;
            overflow: hidden;
			font-family:"Segoe UI";
			background-color:#eeeeee;
        }
  
			.lottieclass{
			display: inline-block;	
			background-color:transparent;
            width:5%;
            height:15%;
            overflow: hidden;
            transform: translate3d(0,0,+1);
            text-align: center;
			z-index:-1;
            opacity: 1;
			
			}
		
			.victory{
			background-color:transparent;
            width:54%;
            height:50%;
            overflow: hidden;
			left:23%;
            text-align: center;
			z-index:1;
			position: absolute;
			top: 10%;
            opacity: 1;
			

			}
		
		#lottie0{

		  -webkit-animation: jump 0.8s cubic-bezier(0.3, 1.2, 0.8, 1.2);
  animation: jump 0.6s cubic-bezier(0.3, 1.2, 0.3 1.2);
  
		}
			
		#lottie1{
  
	
		  -webkit-animation: 
		  jump 1s cubic-bezier(0.3, 1.2, 0.8, 1.2);
  animation: jump 1s cubic-bezier(0.3, 1.2, 0.3 1.2);
  	  


    
		}
		
		
		
			#lottie2{
			
	
		  -webkit-animation: jump 1.2s cubic-bezier(0.3, 1.2, 0.8, 1.2);
  animation: jump 1.2s cubic-bezier(0.3, 1.2, 0.3 1.2);
		}
		
			#lottie3{
			
	
		  -webkit-animation: jump 1.4s cubic-bezier(0.3, 1.2, 0.8, 1.2);
  animation: jump 1.2s cubic-bezier(0.3, 1.2, 0.3 1.2);
		}
		
		
			#lottie4{
			
	
		  -webkit-animation: jump 1.6s cubic-bezier(0.3, 1.2, 0.8, 1.2);
  animation: jump 1.2s cubic-bezier(0.3, 1.2, 0.3 1.2);
		}
		
		
		
	.giftbutton{
			
			background-color:transparent;
            width:4%;
            height:5%;
            overflow: hidden;
            text-align: center;
			z-index:1;
			position: absolute;
			top: 18%;
            opacity: 0;
		
	}
				
#button0{
left:37.3%;
}
#button1{
left:42.5%;
}
#button2{
left:47.9%;
}
#button3{
left:53.3%;
}
#button4{
left:58.6%;
}


			
		.button {
		opacity: 0;
		transition: opacity 1s; 
		position:absolute; 
		font-size: 0px;
		cursor: pointer;
		z-index:1;
		text-align: center;
	    font-weight: bold;
		text-decoration: none;
		outline: none;
		color: #fff;
		background-color: #F523B1;
		border: none;
		border-radius: 15px;
		box-shadow: 0 9px #C41C8E;
		width:8%;
        height:12%;
		}

		.button:hover {background-color: #EA69C0}

		.button:active {
		background-color: #F523B1;
		box-shadow: 0 5px #C41C8E;
		transform: translateY(4px);
		}

		.buttoncol {
		opacity: 1;
		width:5%;
		height:3%;
		transition: opacity 1s; 
	
		font-size: 20px;
		cursor: pointer;
		z-index:1;
		text-align: center;
		  font-weight: bold;
		text-decoration: none;
		outline: none;
		color: #fff;
		background-color: #F523B1;
		border: none;
		border-radius: 15px;
		box-shadow: 0 9px #C41C8E;
		}

		.buttoncol:hover {background-color: #EA69C0}

		.buttoncol:active {
		background-color: #F523B1;
		box-shadow: 0 5px #C41C8E;
		transform: translateY(4px);
		}

	
@-webkit-keyframes comedown {

  0% {
    transform: translateY(0%;);
  }
  100% {
    transform: translateY(30%);
  }
}
@keyframes comedownmp {

  0% {
    transform: translateY(0%;);
  }
  100% {
    transform: translateY(30%);
  }
}
	
@-webkit-keyframes jump {
   from { opacity: 0; }
    to   { opacity: 1; }
  0% {
    transform: translateY(600px);
  }
  100% {
    transform: translateY(0px);
  }
}
@keyframes jump {
   from { opacity: 0; }
    to   { opacity: 1; }
  0% {
    transform: translateY(600px);
  }
  100% {
    transform: translateY(0px);
  }
}
    </style>
</head>
<body>	

<!--lottie player/library -->	
<script type="text/javascript" src="lottie.js"></script>
<!-- animation is stored in a variable from this file -->

<script type="text/javascript" src="gifthover.json"></script>
<script type="text/javascript" src="giftopen.json"></script>
<script type="text/javascript" src="victory.json"></script>
<p></p>
<center>
	<div id="giftcomp" style="margin-top:5%"> 
<!-- lottie container for the animation-->	

<div class="lottieclass" id="lottie0" ></div>
<div  class="lottieclass" id="lottie1" ></div>
<div  class="lottieclass" id="lottie2" ></div>
<div class="lottieclass" id="lottie3" ></div>
<div  class="lottieclass" id="lottie4" ></div>
<div  class="victory" id="victory" ></div>
				

<!--ticketPos(12.3)ticketPos(18.5)ticketPos(22.9)ticketPos(28.3)ticketPos(33.6)-->
<div>
<button class="giftbutton" id="button0" onmouseover="animateHover(this.id)" onclick="animatingGame(this.id);">PLAY GAME</button>
<button class="giftbutton" id="button1" onmouseover="animateHover(this.id)" onclick="animatingGame(this.id);">PLAY GAME</button>
<button class="giftbutton" id="button2" onmouseover="animateHover(this.id)" onclick="animatingGame(this.id);">PLAY GAME</button>
<button class="giftbutton" id="button3" onmouseover="animateHover(this.id)" onclick="animatingGame(this.id);">PLAY GAME</button>
<button class="giftbutton" id="button4" onmouseover="animateHover(this.id)" onclick="animatingGame(this.id);">PLAY GAME</button>

<p></p>
</div>
<div style="margin-top:20%">
ribbon : <input spellcheck="false" type="text" id="hexInputRibbon" value="#DA4453" size="5" maxlength="7">
box : <input spellcheck="false" type="text" id="hexInputBox" value="#8CC153" size="5" maxlength="7" >
shadow : <input spellcheck="false" type="text" id="hexInputShadow" value="#5D5F59" size="5" maxlength="7" >
<p></p>

<button class="buttoncol" id="changeCol"  onclick="setColors()">hex</button>


<p></p>

 win :<input spellcheck="false" type="text" id="win_data" value="12" size="1" >
 dis_code: <input type="text" id="discount" value="Join WooHoo!" size="12">
 </div>
<center>


<script>


const RGB_HEX = /^#?(?:([\da-f]{3})[\da-f]?|([\da-f]{6})(?:[\da-f]{2})?)$/i;

const hex2RGB = str => {
  const [ , short, long ] = String(str).match(RGB_HEX) || [];

  if (long) {
    const value = Number.parseInt(long, 16);
    return [ value >> 16, value >> 8 & 0xFF, value & 0xFF ];
  } else if (short) {
    return Array.from(short, s => Number.parseInt(s, 16)).map(n => (n << 4) | n);
  }
};






    var boxes=[];
	var winData;
	var clickedBox=false;
	// pool of hardcoded values - if you want to add or remove - pass the length of the array as a argument in slotsTxt
	var hardValues = [12,23,66,3,45,6,19,59];
	
	var buttonPlay = document.getElementById("playbtn");
	
	let hexInputRibbon = document.getElementById("hexInputRibbon").value;
	let hexInputBox = document.getElementById("hexInputBox").value;
	let hexInputShadow=document.getElementById("hexInputShadow").value;
	

	   	//lottie settings
		var params = [];
        var anim = [];
		
	var vicPara = {
        container: document.getElementById('victory'),
        renderer: 'svg',
        loop: false,
        autoplay: false,
        animationData: victoryJSON
    };
		var victoryScreen = lottie.loadAnimation(vicPara);
		
		for(let i=0; i<=4;i+=1){
		params[i]=	{
        container: document.getElementById('lottie'+i),
        renderer: 'svg',
        loop: false,
        autoplay: false,
        animationData: giftHoverJSON 
		};
		
		
	
		
	function ticketPos(pos){	
	 document.getElementById('victory').style=`left:${pos}%`
	
	}
	
			
		anim[i]=lottie.loadAnimation(params[i]);
		anim[i] = lottie.loadAnimation(params[i]);
		
		setTimeout(function(){	setColors(giftHoverJSON); }, 15);clearTimeout();

	
		}


	  
	

	function animatingGame(id){
	
	clickedBox=true;
	id=+id.slice(-1);
	
  
	//get wining data from database or in this case from the input
	winData = document.getElementById("win_data").value;
	discountCode =  document.getElementById("discount").value;
		

	
	victoryJSON.layers[6].t.d.k[0].s.t = winData+"%";
	victoryJSON.layers[8].t.d.k[0].s.t = discountCode;
	vicPara.animationData = victoryJSON;
	victoryScreen.destroy();
	victoryScreen = lottie.loadAnimation(vicPara);
	
	victoryScreen.play();
	
	//reset animation 
	anim[id].destroy();
	params[id].animationData = giftOpenJSON; 
    anim[id] = lottie.loadAnimation(params[id]);
	anim[id].play();

setTimeout(function(){clickedBox=false; }, 1000);clearTimeout();

	
	
	

	
	
	
	

	
	
	
	}
	
	
	
	
	
	
		function animateHover(id){
	    id=+id.slice(-1);
		
     
		
	//reset animation 
	anim[id].destroy();
		


	//pass the new animation with the winning data and play it
	params[id].animationData = giftHoverJSON; 
    anim[id] = lottie.loadAnimation(params[id]);
	anim[id].play();

	
	
	
	
	
	
	
	
	
	}
	
	
	
	
	
	
	
	
	
	
	
	
	
	function setColors(){
	colorAE(giftHoverJSON);
	colorAE(giftOpenJSON);
	
	}
	
	
	
	function colorAE(file){
	//the path to the text prop in the json file - it represents the layer tree in after effects


	 hexInputRibbon = document.getElementById("hexInputRibbon").value;
	 hexInputBox = document.getElementById("hexInputBox").value;
	 hexInputShadow = document.getElementById("hexInputShadow").value;
	 
	 let ribbon = hexInputRibbon;
	 let box = hexInputBox;
	 let shadow = hexInputShadow;
 
	file.assets[0].layers[0].shapes[1].c.k = hex2RGB(ribbon).map(n=>n/255);
	file.assets[0].layers[3].shapes[1].c.k = hex2RGB(ribbon).map(n=>n/255);
	file.assets[0].layers[5].shapes[1].c.k = hex2RGB(ribbon).map(n=>n/255);
	
	file.assets[0].layers[1].shapes[1].c.k = hex2RGB(box).map(n=>n/255);
	file.assets[0].layers[4].shapes[1].c.k = hex2RGB(box).map(n=>n/255);
	
		file.assets[0].layers[2].shapes[1].c.k = hex2RGB(shadow).map(n=>n/255);

	
			
	
		
		
			for(let i = 0; i<=4;i+=1){
		anim[i].destroy();
		params[i].animationData = file;
		anim[i] = lottie.loadAnimation(params[i]);
			}
	
		

	}
	
	
	
	
	
	
	
	//function for manipulating text values of after effects layers
	function textAE(n,val){
	return startJSON.layers[1].layers[n].t.d.k[0].s.t = val;
	}

	//randomising the other text values from the pool of hardcoded values	
	function otherTxt(){
	for(let t = 16; t>=0; t-=2){
	textAE(t,hardValues[Math.floor((Math.random() * 10))] + "%");
		}	
	}


	
setTimeout(function(){animateHover("b"+4); }, 150);clearTimeout();
	
setTimeout(function(){animateHover("b"+3); }, 140);clearTimeout();

setTimeout(function(){animateHover("b"+2); }, 100);clearTimeout();

setTimeout(function(){animateHover("b"+1); }, 123);clearTimeout();

setTimeout(function(){animateHover("b"+0); }, 80);clearTimeout();

setInterval(function(){if(!clickedBox){ animateHover("b"+(Math.floor(Math.random()*2)+1)); }}, 5000);clearInterval();







</script>
</body>
</html>

